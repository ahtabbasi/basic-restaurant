# Android
# Build your Android project with Gradle.
# Add steps that test, sign, and distribute the APK, save build artifacts, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/android

trigger:
- main

pool:
  vmImage: 'macos-latest'

stages:

- stage: UnitTestStage
  displayName: 'Run Unit Tests Stage'
  jobs:
    - job: UnitTestJob
      displayName: 'Run Unit Tests Job'
      steps:
        - task: Gradle@2
          displayName: 'Unit Tests Task'
          inputs:
            workingDirectory: ''
            gradleWrapperFile: 'gradlew'
            gradleOptions: '-Xmx3072m'
            publishJUnitResults: true
            testResultsFiles: '**/TEST-*.xml'
            tasks: 'clean testDebugUnitTest'
  
- stage: AssembleDebugStage
  displayName: 'Assemble Debug Stage'
  jobs:
    - job: AssembleDebugJob
      displayName: 'Assemble Debug Job'
      steps:
      - task: Gradle@2
        displayName: 'Assemble Debug Task'
        inputs:
          workingDirectory: ''
          gradleWrapperFile: 'gradlew'
          gradleOptions: '-Xmx3072m'
          publishJUnitResults: false
          testResultsFiles: '**/TEST-*.xml'
          tasks: 'assembleDebug'